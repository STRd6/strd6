= javascript_include_tag 'jscolor'
= javascript_include_tag 'draw'

%input#current_color.color{:type => 'text'}

= link_to_function image_tag('draw/pencil.png', :alt => 'Pencil', :class => 'tool'), 'canvas.setTool(pencil)', { :title => 'Pencil'}
= link_to_function image_tag('draw/dropper.png', :alt => 'Dropper', :class => 'tool'), 'canvas.setTool(dropper)', { :title => 'Dropper' }
= link_to_function image_tag('draw/eraser.png', :alt => 'Eraser', :class => 'tool'), 'canvas.setTool(eraser)', { :title => 'Eraser' }

#main_canvas.canvas
  - 32.times do |y|
    - 32.times do |x|
      - id = "p_#{x}_#{y}"
      .pixel{:id => id}
= javascript_tag "var canvas = new Canvas('main_canvas');"
- 32.times do |y|
  - 32.times do |x|
    = javascript_tag "new Pixel('p_#{x}_#{y}', canvas);"